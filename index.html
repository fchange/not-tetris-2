<!DOCTYPE html>
<html>
<head>
  <title>物理俄罗斯方块 (Matter.js)</title>
  <!-- Remove Tailwind CSS -->
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
  <!-- Add link to our custom CSS file -->
  <link rel="stylesheet" href="style.css">
  <!-- Removed inline styles as they're now in style.css -->
</head>
<body>
  <!-- Start Screen -->
  <div id="start-screen">
    <h1>物理俄罗斯方块</h1>
    
    <!-- 游戏说明 -->
    <div class="game-instructions">
      <h2>游戏说明</h2>
      <p>这是一个基于物理引擎的俄罗斯方块变种游戏。方块会受重力影响，通过施加扭矩来控制方块的旋转和移动。</p>
      <p>当水平区域内的方块占据面积达到90%时，该区域会被消除。连续消除多个区域可以获得连击奖励！</p>
    </div>

    <!-- 按键说明 -->
    <div class="controls-instructions">
      <h2>操作说明</h2>
      <ul>
        <li>← 左方向键：向左移动并逆时针旋转</li>
        <li>→ 右方向键：向右移动并顺时针旋转</li>
        <li>↓ 下方向键：加速下落</li>
      </ul>
    </div>

    <button id="start-button">
      开始游戏 (Start)
    </button>
  </div>

  <!-- Game container with canvas and progress bars -->
  <div class="game-container">
    <!-- Canvas element for rendering (initially hidden) -->
    <canvas id="game-canvas"></canvas>
    
    <!-- Container for progress bars -->
    <div id="progress-bars-container">
      <!-- Progress bars will be dynamically added here -->
    </div>
    
    <!-- Score display container -->
    <div id="score-container">
      <div class="score-section">
        <div class="score-label">分数 (Score)</div>
        <div id="score-value">0</div>
      </div>
      
      <div class="score-section">
        <div class="score-label">连击 (Combo)</div>
        <div id="combo-counter">x1</div>
      </div>
      
      <div class="score-section">
        <div class="score-label">难度 (Level)</div>
        <div id="difficulty-level">1</div>
      </div>
      
      <div class="score-section">
        <div class="score-label">最高分 (Best)</div>
        <div id="high-score">0</div>
      </div>
    </div>
  </div>

  <!-- Include poly-decomp library FIRST -->
  <script src="src/decomp.min.js"></script>
  <!-- Include Matter.js library from CDN -->
  <script src="src/matter.min.js"></script>

  <!-- Include our Game settings and Tetromino definitions -->
  <!-- IMPORTANT: Game.js must be included before Tetromino.js -->
  <script src="src/Game.js" defer></script>
  <script src="src/Tetromino.js" defer></script>
  <script src="src/Controls.js" defer></script>
  <script src="src/ZoneDetection.js" defer></script>

  <script>
    // Add event listener to the start button
    document.getElementById('start-button').addEventListener('click', () => {
      // Hide the start screen
      document.getElementById('start-screen').style.display = 'none';

      // Initialize and start the game
      Game.start();
    });

    // No other setup code needed here anymore, it's all in Game.start()
  </script>
</body>
</html> 